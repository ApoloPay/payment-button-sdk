---
import type { HTMLAttributes } from "astro/types";

import type {
  ClientResponse,
  ClientError,
  Locale,
  ApoloPayClient,
} from "@payment-button-sdk/ui";

interface Props extends HTMLAttributes<"div"> {
  client?: ApoloPayClient;
  processId?: string;
  metadata?: Record<string, any>;
  productTitle?: string;
  lang?: Locale;
  disabled?: boolean;
  loading?: boolean;
  label?: string;
  barrierDismissible?: boolean;
  onSuccess?: (event: CustomEvent<ClientResponse>) => void;
  onError?: (event: CustomEvent<ClientError>) => void;
}

const {
  client,
  processId,
  metadata,
  productTitle,
  lang,
  disabled,
  loading,
  label,
  barrierDismissible,
  ...restProps
} = Astro.props;
const hasContent = Astro.slots.has("default");
---

{
  hasContent ? (
    <payment-button
      client={client}
      process-id={processId}
      metadata={metadata}
      product-title={productTitle}
      lang={lang}
      disabled={disabled}
      loading={loading}
      label={label}
      barrier-dismissible={barrierDismissible}
      {...restProps}
    >
      <slot />
    </payment-button>
  ) : (
    <payment-button
      client={client}
      process-id={processId}
      metadata={metadata}
      product-title={productTitle}
      lang={lang}
      disabled={disabled}
      loading={loading}
      label={label}
      barrier-dismissible={barrierDismissible}
      {...restProps}
    />
  )
}

<script>
  import "@payment-button-sdk/ui";
</script>
